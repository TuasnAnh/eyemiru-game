(this.webpackJsonpeyemiru=this.webpackJsonpeyemiru||[]).push([[0],{27:function(e,t,n){e.exports=n(55)},29:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),r=n(2),o=n(3),s=(n(29),n(0)),c=n(10),h=n.n(c),d=n(4),u=n(6),f=function(e,t,n){var i,a=!1,r=0,o=Object(u.a)(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.first===e&&s.second===t){r=s.amount,a=!0;break}a=!1}}catch(c){o.e(c)}finally{o.f()}return a?r:0},g=function e(t,n,i,a){var o=this;Object(d.a)(this,e),this.addToCache=function(e,t,n,i,a){for(var r=0,s=0;s<e.length;s++){var c=e.charCodeAt(s),h=e.charCodeAt(s-1),d=o.findRegions(c),u=f(h,c,o.kerningsData);o.cache.push({key:d,x:t+r+d.xoffset*o.scale+u*o.scale,y:n+d.yoffset*o.scale+i*o.scale+a,width:d.width*o.scale,height:d.height*o.scale}),r+=d.xadvance*o.scale}},this.beforeDrawing=function(e,t,n,i){if(o.preDraw){for(var a=0,s=0,c=[],h=0;h<i.length;h++){var d=i.charCodeAt(h),u=o.findRegions(d);32!==d?s+=u.xadvance*o.scale:(a=u.xadvance*o.scale,c.push(s),s=0)}var g=Math.max.apply(Math,c)+a;o.newbase=n,o.scale=o.newbase/o.baseLine;for(var l=(i=i.trim()).split("/n").map((function(e){return e.trim()})),p=0,m=0;m<l.length;m++){i=l[m],o.oriWidth=0;for(var w=0;w<i.length;w++){var v=i.charCodeAt(w),b=i.charCodeAt(w-1),x=o.findRegions(v),y=f(b,v,o.kerningsData);o.oriWidth+=y*o.scale,i.length,o.oriWidth+=x.xadvance*o.scale}var k=o.oriWidth/o.fixedWidth;p=o.lineHeight*o.scale*m;var C=0,T="",j=0;if(k>1&&o.fixedWidth>g)for(var S=0;S<i.length;S++){T+=i[S];var O=i.charCodeAt(S);if((C+=o.findRegions(O).xadvance*o.scale)>=o.fixedWidth)for(var I=S;I>=0;){S--,I--;var R=o.findRegions(i.charCodeAt(S));if(C-=R.xadvance*o.scale,T=T.substring(0,T.length-1),C<=o.fixedWidth&&32===R.id){j=o.lineHeight*o.positionBreak.length,o.positionBreak.push(S),o.lastBreakIndex=S;for(var M=T.trim(),A=0,_=0,P=0;P<M.length;P++)_=o.findRegions(M.charCodeAt(P)),P===M.length-1?A+=_.width*o.scale:A+=_.xadvance*o.scale;var B=o.getPositionBasedOnMode(e,t,A),W=Object(r.a)(B,2),H=W[0],L=W[1];o.addToCache(M,H,L,j,p),C=0,I=-1,T=""}}if(S===i.length-1&&C<o.oriWidth){for(var N="",F=o.lastBreakIndex;F<=S;F++)N+=i[F];for(var V=N.trim(),D=0,E=0,X=0;X<V.length;X++)E=o.findRegions(V.charCodeAt(X)),X===V.length-1?D+=E.width*o.scale:D+=E.xadvance*o.scale;var G=o.getPositionBasedOnMode(e,t,D),Y=Object(r.a)(G,2),q=Y[0],J=Y[1];j=o.lineHeight*o.positionBreak.length,o.addToCache(V,q,J,j,p)}}if(k<=1||o.fixedWidth<g){var z=o.getPositionBasedOnMode(e,t,o.oriWidth),K=Object(r.a)(z,2),U=K[0],Q=K[1];o.addToCache(i,U,Q,0,p)}}0===o.type&&(o.preDraw=!1),o.oriHeight=o.newbase}},this.getPositionBasedOnMode=function(e,t,n){return 0===o.align?e-=Math.round(n/2):1===o.align&&(e-=n),[e,t]},this.setAlignMode=function(e){o.align=e},this.setType=function(e){o.type=e},this.setLineHeight=function(e){o.lineHeight=e},this.setFixedGlyphWidth=function(e){o.fixedWidth=e},this.findRegions=function(e){for(var t=0;t<o.regions.length;t++)if(o.regions[t].id===e)return o.regions[t]},this.draw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.baseLine;if(0===o.type){o.preDraw&&o.beforeDrawing(n,i,a,t);for(var r=0;r<o.cache.length;r++){var s=o.cache[r];s.key.draw(e,s.x,s.y,s.width,s.height)}}if(1===o.type){o.beforeDrawing(n,i,a,t);for(var c=0;c<o.cache.length;c++){var h=o.cache[c];h.key.draw(e,h.x,h.y,h.width,h.height)}o.cache.length=0,o.positionBreak.length=0}},this.pageImage=t,this.regions=n,this.kerningsData=i,this.canvasWidth=a,this.type=0,this.align=2,this.lineHeight=t.lineHeight,this.baseLine=t.base,this.fixedWidth=a,this.position=new s.b(0,0),this.scale=0,this.newBase=0,this.oriWidth=0,this.oriHeight=0,this.positionBreak=[],this.lastBreakIndex=0,this.cache=[],this.preDraw=!0},l=2,p=1;function m(e,t){for(var n=e.split("/"),i=t.split("/"),a=[],r=0,o=n.length;r<o;r++)if(".."===n[r])a.pop();else{if("."===n[r])continue;a.push(n[r])}for(var s=0,c=i.length;s<c;s++)if(".."===i[s])a.pop();else{if("."===i[s])continue;a.push(i[s])}return a.join("/")}var w=function(){var e=Object(o.a)(a.a.mark((function e(t,n,i){var r,o,c,h,d,u,f,l,p,w,v,b,x,y,k,C,T,j,S,O,I,R,M,A,_,P,B,W,H,L,N,F,V,D,E,X,G,Y,q,J,z,K,U,Q,Z,$,ee,te,ne,ie,ae,re,oe,se,ce,he,de,ue,fe,ge,le,pe,me,we,ve,be,xe,ye,ke,Ce,Te,je,Se,Oe;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n).then((function(e){return e.text()}));case 2:r=e.sent,o=[],c=[],h=[],d=null,u=r.split("\n"),f=0,p=[],w=!1,v=0,b=2;case 13:if(x=u[b],p.length=0,"page"!==(l=x.split(" ").map((function(e){return e.trim()})))[0]){e.next=21;break}v+=1,e.next=22;break;case 21:return e.abrupt("break",25);case 22:b+=1,e.next=13;break;case 25:y=-1,k=2+v+1;case 27:if(void 0!==(C=u[f])){e.next=32;break}return w=!1,e.abrupt("break",39);case 32:if(2===C.split(" ").length&&("kernings"===C.split(" ")[0]&&(w=!0),f++,C=u[f]),w&&null!==d){for(l=(l=C.split(" ").map((function(e){return e.trim()}))).filter((function(e){return""!==e})),p.length=0,T=1;T<l.length;T++)p.push(l[T].split("=")[1]);j=parseInt(p[0],10),S=parseInt(p[1],10),O=parseInt(p[2],10),h.push({first:j,second:S,amount:O})}if(null===d){for(y+=1,p.length=0,l=C.split(" ").map((function(e){return e.trim()})),I=1;I<l.length;I++)p.push(l[I].split("=")[1]);for(R=p[0],M=parseInt(p[1],10),A=0!==parseInt(p[2],10),_=0!==parseInt(p[3],10),P=p[4],B=parseInt(p[5],10),W=parseInt(p[6],10),H=parseInt(p[7],10),L=parseInt(p[8],10),N=p[9].split(",").map((function(e){return parseInt(e,10)})),F=p[10].split(",").map((function(e){return parseInt(e,10)})),V=parseInt(p[11],10),f++,C=u[f],p.length=0,l=C.split(" ").map((function(e){return e.trim()})),D=1;D<l.length;D++)p.push(l[D].split("=")[1]);for(E=parseInt(p[0],10),X=parseInt(p[1],10),G=parseInt(p[2],10),Y=parseInt(p[3],10),q=parseInt(p[4],10),J=parseInt(p[5],10),z=parseInt(p[6],10),K=parseInt(p[7],10),U=parseInt(p[8],10),Q=parseInt(p[9],10),C=u[f=f+y+1],p.length=0,l=C.split(" ").map((function(e){return e.trim()})),Z=1;Z<l.length;Z++)p.push(l[Z].split("=")[1]);$=parseInt(p[0],10),ee=p[1].split('"'),te=m(n,"../".concat(ee[1])),d={file:te,page_id:$,face:R,size:M,bold:A,italic:_,charset:P,unicode:B,stretchH:W,smooth:H,aa:L,padding:N,spacing:F,outline:V,lineHeight:E,base:X,scaleW:G,scaleH:Y,num_of_pages:q,packed:J,alphaChnl:z,redChnl:K,greenChnl:U,blueChnl:Q},o.push(d),C=u[f=k]}if(!w&&null!==d){for(l=(l=C.split(" ").map((function(e){return e.trim()}))).filter((function(e){return""!==e})),p.length=0,ne=1;ne<l.length;ne++)p.push(l[ne].split("=")[1]);ie=parseInt(p[0],10),ae=parseInt(p[1],10),re=parseInt(p[2],10),oe=parseInt(p[3],10),se=parseInt(p[4],10),ce=parseInt(p[5],10),he=parseInt(p[6],10),de=parseInt(p[7],10),ue=parseInt(p[8],10),(fe={id:ie,left:ae,top:re,width:oe,height:se,xoffset:ce,yoffset:he,xadvance:de,page:d,id_page:ue}).id_page===y?c.push(fe):y===v-1?w=!0:(k=f,f=-1,d=null)}f++,e.next=27;break;case 39:ge=0,le=o;case 40:if(!(ge<le.length)){e.next=50;break}return pe=le[ge],e.next=44,Object(s.j)(t,pe.file,i);case 44:pe.texture=e.sent,pe.invTextWidth=1/pe.texture.width,pe.invTextHeight=1/pe.texture.height;case 47:ge++,e.next=40;break;case 50:for(me=[],we=0,ve=c;we<ve.length;we++)be=ve[we],xe=be.left,ye=be.top,ke=be.width,Ce=be.height,Te=be.page,je=Te.texture,Se=Te.invTexWidth,Oe=Te.invTexHeight,me.push(new s.a(je,xe,ye,ke,Ce,be,Se,Oe));return e.abrupt("return",{getLineHeight:function(){return d.lineHeight},getPages:function(){return o},getRegions:function(){return me},findRegions:function(e){for(var t=0;t<me.length;t++)if(me[t].id===e)return me[t]},setNewText:function(e){return new g(d,me,h,e)}});case 53:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),v=function(e,t){return[t,t*e.height/e.width]},b=function(e){if(void 0!==e){var t=e.split("@"),n=t[0].slice(-1);t[0].length>7&&(t[0]=t[0].slice(0,7)),e.length>13&&t[1].length>6&&(t[1]=t[1].slice(0,6),t[1]+="..");for(var i=Math.max(1,Math.floor(t[0].length/3)),a="",r=0;r<i;r++)a+=t[0].charAt(r);return a+"*".repeat(t[0].length-2)+n+"@"+t[1]}},x=function(e){var t=e.canvas,n=e.viewport,i=e.width,c=e.height,h=e.camera,d=e.batch,u=e.assets,f=(e.score,e.whiteTex),g=e.font,l=function(){var t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,N(e);case 3:t.t1=t.sent,t.t0.setCurrentScreen.call(t.t0,t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=Object(s.g)(t,n),m=u.backGround,w=u.leaderBoard,x=w.findRegion("logo-2",-1),y=w.findRegion("header",-1),k=w.findRegion("footer",-1),C=w.findRegion("your-score",-1),T=w.findRegion("no1",-1),j=w.findRegion("no2",-1),S=w.findRegion("thu-lai",-1),O=v(x,i/4.1),I=Object(r.a)(O,2),R=I[0],M=I[1],A=v(y,i/2),_=Object(r.a)(A,2),P=_[0],B=_[1],W=v(k,.9*i),H=Object(r.a)(W,2),L=H[0],F=H[1],V=v(C,i/2),D=Object(r.a)(V,2),E=D[0],X=D[1],G=v(T,i/8),Y=Object(r.a)(G,2),q=Y[0],J=Y[1],z=v(j,i/8),K=Object(r.a)(z,2),U=K[0],Q=K[1],Z=v(S,i/3),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ne=[i/2-ee/2,2.2*c/3,ee,te],ie=[{texture:T,width:q,height:J},{texture:j,width:U,height:Q}],ae=i/17,re=i-2*ae,oe=c-2*ae,se=[],ce=new s.b;p.addEventListener("touchStart",(function(){ce.setVector(p.getTouchedWorldCoord()),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e.x*n,a=e.y*n,r=t[0],o=t[0]+t[2],s=t[1],c=t[1]+t[3];return!(i<r||i>o||a<s||a>c)}(ce,ne)&&(e.score=0,l())}));var he=g.numberFont,de=g.textFont,ue=he.setNewText(i),fe=i/5.3,ge=i/3,le=.62*c/3,pe=.69*c/3,me=[de.setNewText(i),de.setNewText(i),de.setNewText(i)],we=[he.setNewText(i),he.setNewText(i),he.setNewText(i)],ve=i/14,be=i/10,xe=0,ye=!1;return{update:function(t){if(se.length>0&&!ye){ye=!0;for(var n=0;n<se.length;n++)se[n].email=b(se[n].email),se[n].username=se[n].username||"",se[n].username=se[n].username.length>12?se[n].username.slice(0,12)+"..":se[n].username}if(d.setProjection(h.combined),d.begin(),Object(s.h)(d,m,0,0,i,c),d.setColor(0,0,0,1),Object(s.h)(d,f,i/2-(re+i/100)/2,c/2-(oe+i/100)/2,re+i/100,oe+i/100),d.setColor(1,246/255,234/255,1),Object(s.h)(d,f,i/2-re/2,c/2-oe/2,re,oe),d.setColor(1,1,1,1),x.draw(d,1*i/12,c/50,R,M),y.draw(d,1.1*i/3,c/25,P,B),C.draw(d,i/3,1.7*c/3,E,X),d.setColor(0,0,0,1),ue.draw(d,"".concat(e.score),i/3,1.79*c/3,fe),d.setColor(1,1,1,1),S.draw(d,ne[0],ne[1],ne[2],ne[3]),k.draw(d,i/2-L/2,c-F+c/200,L,F),se.length>0){xe=se.length>3?3:se.length;for(var a=0;a<xe;a++)d.setColor(0,0,0,1),me[a].draw(d,se[a].username,ge,le+a*c/9,ve),d.setColor(1,115/255,23/255,1),we[a].draw(d,se[a].score.toString(),ge,pe+a*c/9,be),0!==a&&1!==a||(d.setColor(1,1,1,1),ie[a].texture.draw(d,.55*i/3,.6*c/3+c/8.6*a,ie[a].width,ie[a].height))}d.setColor(1,1,1,1),d.end()},destroy:function(){p.cleanup()}}},y=function(){var e,t,n,i,a,r;return{init:function(o,s){s.width;var c=s.height,h=s.assets.gameAssets;e=h.findRegion("BG",-1),t=h.findRegion("border",-1),n=(i=c)*e.width/e.height,a=(r=c)*t.width/t.height},update:function(o,s,c){var h=c.batch,d=c.width,u=(c.height,c.camera);h.setProjection(u.combined),h.begin(),h.setColor(1,1,1,1),e.draw(h,d/2-n/2,0,n,i),t.draw(h,0,0,a,r),t.draw(h,d-a,0,a,r),h.end()}}},k=function(){var e,t,n,i,a=[],r=[];return{init:function(r,o){var s=r.basketState,c=o.width,h=o.assets,d=o.productInBasketTex,u=h.gameAssets;e=u.findRegion("basket_front",-1),t=u.findRegion("basket_back",-1),n=s.width*e.height/e.width,i=s.width*t.height/t.width;for(var f=c/8,g=0;g<d.length;g++){var l=f*d[g].image.height/d[g].image.width;a.push({tex:d[g].image,width:f,height:l})}},update:function(o,s,c){var h=s.basketState,d=s.collection,u=c.batch,f=(c.width,c.height,c.camera);r=[{x:h.x-.9*a[0].width,y:h.y-1.4*h.height},{x:h.x-.1*a[1].width,y:h.y-1.3*h.height},{x:h.x-.45*a[2].width,y:h.y-1.45*h.height}],u.setProjection(f.combined),u.begin(),u.setColor(1,1,1,1),t.draw(u,h.x-h.width/2,h.y-i,h.width,i);for(var g=d.length-1;g>=0;g--)d[g].enable&&a[g].tex.draw(u,r[g].x,r[g].y,a[g].width,a[g].height);e.draw(u,h.x-h.width/2,h.y-n,h.width,n),u.end()}}},C=function(){var e=new s.b;return{init:function(t,n){var i=t.basketState,a=n.inputHandler;n.width;a.addEventListener("touchStart",(function(){e.setVector(a.getTouchedWorldCoord()),i.target.x=e.x})),a.addEventListener("touchMove",(function(){e.setVector(a.getTouchedWorldCoord()),i.target.x=e.x}))},update:function(e,t,n){t.trayState,n.inputHandler}}},T=function(){var e=new s.b;return{update:function(t,n,i){var a=n.basketState,r=(i.batch,i.width);i.height,i.camera;e.setVector(a.target).subVector(a.position).nor().scale(a.speed*t),a.target.distanceSqr(a.position)<=e.len2()?a.position.setVector(a.target):a.position.addVector(e),a.x=a.position.x,a.x<=a.width/2&&(a.x=a.width/2),a.x>=r-a.width/2&&(a.x=r-a.width/2)}}},j=function(){var e,t=2,n=0,i=0,a=0;return{update:function(r,o,s){var c=s.width,h=s.height,d=s.productTex,u=s.fakeProductTex,f=o.difficulty,g=o.products;if(o.stateTime>t&&void 0===e){var l=function(e){return e>=1&&e<=2?{minNumber:0,maxNumber:2}:e>=3&&e<=7?{minNumber:0,maxNumber:3}:{minNumber:0,maxNumber:5}}(f);l.minNumber,l.maxNumber;e=function(e,t,n){var i=0,a=[];return 0===e&&(i=[0],a=[Math.random()*(.8*t-.15*t)+.15*t]),{timer:i,x:a}}(0,c),n=o.stateTime+e.timer[i]}if(o.stateTime>t&&o.stateTime>n&&void 0!==e){i=Math.min(i+=1,e.timer.length),n=o.stateTime+e.timer[i];for(var p=1,m=i-1;e.timer[m]===e.timer[m+1]&&m<e.timer.length;)m=Math.min(m+=1,e.timer.length),p+=1;for(var w=0;w<p;w++){w>0&&(i=Math.min(i+=1,e.timer.length)),n=o.stateTime+e.timer[i];var v=!0,b=Math.floor(Math.random()*u.length);Math.random()>.3&&(v=!1,b=Math.floor(Math.random()*d.length)),g.push({type:b,isFake:v,stateTime:0,x:e.x[a],y:-h/8,speedY:0}),a=Math.min(a+=1,e.x.length-1)}i===e.timer.length&&(t=o.stateTime+function(e){return e>=1&&e<=3?1:e>=4&&e<=6?2:e>=7&&e<=9?1.5:1}(f),i=0,a=0,e=void 0)}}}},S=function(){return{update:function(e,t,n){for(var i=t.products,a=t.productInfos,r=t.whiteSmokeList,o=n.height,s=i.length-1;s>=0;s--)i[s].y+=e*i[s].speedY,i[s].speedY+=a.accY*e,i[s].y>.96*o&&(r.push({stateTime:0,x:i[s].x,y:i[s].y}),i.splice(s,1))}}},O=function(){var e,t,n=[],i=[];return{init:function(t,a){a.width;var r=a.height,o=a.productTex,s=a.fakeProductTex;e=r/10;for(var c=0;c<o.length;c++)n.push({tex:o[c].image,width:o[c].image.width*e/o[c].image.height});for(var h=0;h<s.length;h++)i.push({tex:s[h].image,width:s[h].image.width*e/s[h].image.height})},update:function(a,r,o){var s=r.products,c=o.batch,h=o.camera;o.width,o.height,o.productTex,o.fakeProductTex;c.setProjection(h.combined),c.begin(),c.setColor(1,1,1,1);for(var d=s.length-1;d>=0;d--)(t=s[d].isFake?i[s[d].type]:n[s[d].type]).tex.draw(c,s[d].x-t.width/2,s[d].y-e,t.width,e);c.end()}}},I=function(){return{update:function(e,t,n){for(var i=n.width,a=n.height,r=t.basketState,o=t.products,c=t.collection,h=t.life,d=t.starList,u=!1,f=o.length-1;f>=0;f--)if(o[f].x>r.x-r.width/2&&o[f].x<r.x+r.width/2&&o[f].y>r.y-.7*r.height&&o[f].y<r.y-.3*r.height){if(!o[f].isFake&&!t.correctCatch){console.log("hit"),t.correctCatch=!0;for(var g=0;g<c.length;g++)c[g].type!==o[f].type||c[g].enable||u||(u=!0,c[g].enable=!0);if(2===o[f].type){t.vitaminACounter=Math.min(5,t.vitaminACounter+=1);var l=r.width/.3;d.push({type:0,stateTime:0,time:.3,scale:0,scaleSpeed:5,speedX:l,accuX:0})}else{for(var p=[Math.random()*(.4-.3)+.3,Math.random()*(.4-.3)+.3,Math.random()*(.4-.3)+.3],m=[new s.b(r.x,r.y-r.height),new s.b(r.x,r.y-r.height),new s.b(r.x,r.y-r.height)],w=[new s.b(r.x-Math.random()*(i/3-i/7)+i/7,Math.random()*(6.5*a/8-5*a/8)+5*a/8),new s.b(r.x-Math.random()*(i/20),Math.random()*(6.5*a/8-5*a/8)+5*a/8),new s.b(r.x+Math.random()*(i/3-i/7)+i/7,Math.random()*(6.5*a/8-5*a/8)+5*a/8)],v=[],b=[],x=0;x<p.length;x++)v.push(w[x].distance(m[x])/p[x]),b.push(1/p[x]);d.push({type:1,time:p,scale:[1,1,1],stateTime:[0,0,0],position:m,target:w,speed:v,scaleSpeed:b})}o.splice(f,1);break}o[f].isFake&&(console.log("miss"),h[t.lifeIndex].open=!1,t.lifeIndex=Math.max(0,t.lifeIndex-=1),t.stunScreen.check=!0,o.splice(f,1))}}}},R=function(){return{update:function(e,t,n){t.correctCatch&&(t.correctCatch=!1,t.score+=100,t.score%1e3===0&&(t.difficulty+=1))}}},M=function(){var e,t,n,i,a,r;return{init:function(i,o){var s=o.width,c=(o.height,o.assets.gameAssets);e=c.findRegion("open_eye",-1),t=c.findRegion("close_eye",-1),a=(n=s/11)*e.height/e.width,r=n*t.height/t.width},update:function(o,s,c){var h=s.life,d=c.batch,u=c.camera,f=c.width,g=c.height;d.setProjection(u.combined),d.begin();for(var l=0;l<h.length;l++){var p=t;i=r,h[l].open&&(p=e,i=a),p.draw(d,f/1.6+l*(n+f/50),g/15-i/2,n,i)}d.end()}}},A=function(){var e,t,n,i,a,r=new s.b;return{init:function(r,o){var s=o.assets,c=o.width,h=(o.height,s.gameAssets);e=h.findRegion("star",-1),n=(t=c/6)*e.height/e.width,i=c/6,a=t*e.height/e.width},update:function(o,s,c){var h=s.starList,d=s.basketState,u=c.batch,f=c.camera;c.width,c.height;u.setProjection(f.combined),u.begin();for(var g=h.length-1;g>=0;g--)if(0===h[g].type)h[g].stateTime+=o,h[g].accuX+=o*h[g].speedX,h[g].accuX<2*d.width/3?h[g].scale+=o*h[g].scaleSpeed:h[g].scale-=o*h[g].scaleSpeed*1.5,e.draw(u,d.x-d.width/2+h[g].accuX-i/2,d.y-.7*d.height-a/2,i,a,i/2,a/2,0,h[g].scale,h[g].scale),h[g].stateTime>h[g].time&&h.splice(g,1);else{for(var l=0,p=2;p>=0;p--)if(h[g].stateTime[p]<=h[g].time[p]){h[g].stateTime[p]+=o;var m=h[g].target[p],w=h[g].position[p];r.setVector(m).subVector(w).nor().scale(h[g].speed[p]*o),m.distanceSqr(w)<=r.len2()?h[g].position[p].setVector(h[g].target[p]):h[g].position[p].addVector(r),h[g].scale[p]-=o*h[g].scaleSpeed[p],e.draw(u,h[g].position[p].x-t/2,h[g].position[p].y-n/2,t,n,t/2,n/2,0,h[g].scale[p],h[g].scale[p])}else l+=1;3===l&&h.splice(g,1)}u.end()}}},_=function(){return{update:function(e,t,n){var i=t.stunScreen,a=n.width,r=n.height,o=n.batch,c=n.camera,h=n.whiteTex;i.check&&(o.setProjection(c.combined),o.begin(),o.setColor(1,0,0,i.opacity),Object(s.h)(o,h,0,0,a,r),o.end(),i.opacity-=4*e,i.opacity<=0&&(i.opacity=1,i.check=!1))}}},P=function(){var e,t,n,i=0;return{init:function(a,r){var o=r.assets,c=r.width,h=(r.height,o.smoke.findRegions("effect boc khoi"));e=Object(s.c)(.05,h),i=h.length-1,t=.7*c,n=h[0].height*t/h[0].width},update:function(a,r,o){var s=r.whiteSmokeList,c=o.batch,h=o.camera;o.width,o.height;c.setProjection(h.combined),c.begin(),c.setColor(1,1,1,1);for(var d=s.length-1;d>=0;d--)s[d].stateTime+=a,e.getKeyFrame(s[d].stateTime,1).draw(c,s[d].x-t/2.4,s[d].y-n/1.7,t,n),s[d].stateTime>.05*i&&s.splice(d,1);c.end()}}},B=function(){var e,t,n;return{init:function(i,a){var r=a.productTex,o=a.width;a.height;n=r[2].image,t=(e=o/15)*n.height/n.width},update:function(i,a,r){var o=r.batch,s=r.camera,c=r.width,h=r.height,d=a.life;o.setProjection(s.combined),o.begin();for(var u=0;u<a.vitaminACounter;u++)n.draw(o,.87*c,h/8.5+u*(h/60+t),e,t);if(o.end(),5===a.vitaminACounter){for(var f=0;f<d.length;f++)if(!d[f].open){d[f].open=!0,a.lifeIndex+=1;break}a.vitaminACounter=0}}}},W=function(){var e,t,n,i,a,r,o;return{init:function(s,c){var h=c.font,d=c.width,u=(c.height,c.assets.gameAssets);t=u.findRegion("logo",-1),n=u.findRegion("score",-1),a=(i=d/2)*t.height/t.width,o=(r=d/5)*n.height/n.width,(e=h.setNewText(d)).setAlignMode(l),e.setType(p)},update:function(s,c,h){var d=c.score,u=h.batch,f=h.camera,g=h.width,l=h.height;u.setProjection(f.combined),u.begin(),u.setColor(.502,.867,.216,1),e.draw(u,"".concat(d),g/3.2,l/10,g/9.3),u.setColor(1,1,1,1),t.draw(u,g/12,l/35,i,a),n.draw(u,g/12,l/9,r,o),u.end()}}},H=function(e){var t,n=e.width,i=e.height,r=e.canvas,c=e.gl,h=e.batch,d=e.camera,f=e.whiteTex,g=e.assets,l=e.viewport,p=e.font,m=Object(s.g)(r,l),w=3.65*i/4,v=g.gameAssets.findRegion("basket_back",-1),b=n/3.8,H=b*v.height/v.width,L=[{image:(t=g.gameAssets).findRegion("lo_thuoc",-1),type:0},{image:t.findRegion("hop_thuoc",-1),type:1},{image:t.findRegion("vitaminA",-1),type:2}],N=function(e){return[{image:e.findRegion("lo_thuoc_fake",-1),type:0},{image:e.findRegion("lo_thuoc_fake2",-1),type:1},{image:e.findRegion("hop_thuoc_fake",-1),type:2},{image:e.findRegion("hop_thuoc_fake2",-1),type:3}]}(g.gameAssets),F=function(e){return[{image:e.findRegion("lo_1_gio",-1),type:0},{image:e.findRegion("lo_2_gio",-1),type:0},{image:e.findRegion("hop_thuoc_gio",-1),type:1}]}(g.gameAssets),V={score:0,correctCatch:!1,stateTime:0,gameOver:!1,emptyLife:!1,life:[{open:!0},{open:!0},{open:!0}],lifeIndex:2,basketState:{x:n/2,y:w,width:b,height:H,position:new s.b(n/2,w),target:new s.b(n/2,w),speed:2.5*n},difficulty:1,collection:[{type:0,enable:!1},{type:0,enable:!1},{type:1,enable:!1}],collectionFinished:[],products:[],productInfos:{accY:i/2},starList:[],whiteSmokeList:[],stunScreen:{check:!1,opacity:1},vitaminACounter:0},D=function(e,t){var n=[],i=[];return{addSystem:function(a){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.init&&a.init(e,t),r&&(n.push(a),i.push(a)),r||n.push(a)},update:function(a){var r,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=Object(u.a)(n);try{for(s.s();!(r=s.n()).done;){var c=r.value;c.update(a,e,t)}}catch(g){s.e(g)}finally{s.f()}if(o){var h,d=Object(u.a)(i);try{for(d.s();!(h=d.n()).done;){var f=h.value;f.update(a,e,t)}}catch(g){d.e(g)}finally{d.f()}}}}}(V,{canvas:r,width:n,height:i,gl:c,batch:h,camera:d,whiteTex:f,inputHandler:m,assets:g,productTex:L,fakeProductTex:N,productInBasketTex:F,font:p});D.addSystem(C()),D.addSystem(T()),D.addSystem(j()),D.addSystem(S()),D.addSystem(I()),D.addSystem(R()),D.addSystem(y()),D.addSystem(k()),D.addSystem(O()),D.addSystem(W()),D.addSystem(M()),D.addSystem(B()),D.addSystem(A()),D.addSystem(P()),D.addSystem(_());var E=function(){var t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,x(e);case 3:t.t1=t.sent,t.t0.setCurrentScreen.call(t.t0,t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{update:function(e){V.gameOver?E():(V.stateTime+=e,D.update(e))},destroy:function(){m.cleanup()}}},L=function(e){var t=function(){var t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,H(e);case 3:t.t1=t.sent,t.t0.setCurrentScreen.call(t.t0,t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=e.canvas,i=e.viewport,r=e.width,c=e.height,h=e.camera,d=e.batch,u=e.assets,f=e.whiteTex,g=Object(s.g)(n,i),l=u.gameAssets,p=l.findRegion("BG",-1),m=c,w=m*p.width/p.height,v=l.findRegion("panel2",-1),b=.78*r,x=b*v.height/v.width,y=l.findRegion("border",-1),k=c,C=k*y.width/y.height;g.addEventListener("touchStart",(function(e,n){t()}));return{update:function(e){d.setProjection(h.combined),d.begin(),d.setColor(.039,.988,.114,1),Object(s.h)(d,f,0,0,r,c),d.setColor(1,1,1,1),p.draw(d,r/2-w/2,0,w,m),v.draw(d,r/2-b/2,(c-x)/2,b,x),y.draw(d,0,0,C,k),y.draw(d,r-C,0,C,k),d.end()},destroy:function(){g.cleanup()}}},N=function(e){var t=function(){var t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,L(e);case 3:t.t1=t.sent,t.t0.setCurrentScreen.call(t.t0,t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=e.canvas,i=e.viewport,r=e.width,c=e.height,h=e.camera,d=e.batch,u=e.assets,f=e.whiteTex,g=Object(s.g)(n,i),l=u.gameAssets,p=l.findRegion("BG",-1),m=c,w=m*p.width/p.height,v=l.findRegion("panel",-1),b=.78*r,x=b*v.height/v.width,y=l.findRegion("border",-1),k=c,C=k*y.width/y.height;g.addEventListener("touchStart",(function(e,n){t()}));return{update:function(e){d.setProjection(h.combined),d.begin(),d.setColor(.039,.988,.114,1),Object(s.h)(d,f,0,0,r,c),d.setColor(1,1,1,1),p.draw(d,r/2-w/2,0,w,m),v.draw(d,r/2-b/2,(c-x)/2,b,x),y.draw(d,0,0,C,k),y.draw(d,r-C,0,C,k),d.end()},destroy:function(){g.cleanup()}}};(function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,i,o,c,d,u,f,g,l,p,m,v,b,x,y,k,C,T,j,S;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("main"),n=47,i=100,o=Object(s.f)(t,n,i),c=o.getCamera(),d=o.getContext(),u=Object(s.d)(d),f=h()(d),g={score:0,width:n,height:i,canvas:t,gl:d,batch:u,camera:c,whiteTex:f,viewport:o,setCurrentScreen:function(e){g.currentScreen&&g.currentScreen.destroy(),g.currentScreen=e}},e.next=11,Object(s.j)(d,"./assets/logo.png");case 11:return l=e.sent,m=(p=n/1.8)*l.height/l.width,v=0,10,function(){u.setProjection(c.combined),u.begin(),u.setColor(1,114/255,22/255,1),Object(s.h)(u,f,0,0,n,i),u.setColor(1,1,1,1),Object(s.h)(u,l,n/2-p/2,.8*i/3,p,m),u.setColor(1,1,1,1),Object(s.h)(u,f,n/2-n/2.9,2.5*i/4-i/50,n/1.45,i/25),u.setColor(1,114/255,22/255,1),Object(s.h)(u,f,n/2-n/3,2.5*i/4-i/60,n/1.5,i/30),u.setColor(1,1,1,1);var e=v/10;Object(s.h)(u,f,n/2-n/3.1,2.5*i/4-i/80,n/1.55*e,i/40),u.end()},b=function(e){return e.then((function(e){return v+=1,e}))},e.next=20,Promise.all([b(Object(s.i)(d,"./assets/eyemiru.atlas")),b(Object(s.i)(d,"./assets/smoke.atlas"))]);case 20:return x=e.sent,y=Object(r.a)(x,2),k=y[0],C=y[1],T={gameAssets:k,smoke:C},g.assets=T,e.next=28,w(d,"./fonts/text.fnt");case 28:return j=e.sent,g.font=j,e.t0=g,e.next=33,N(g);case 33:e.t1=e.sent,e.t0.setCurrentScreen.call(e.t0,e.t1),d.clearColor(1,1,1,1),S=function(e){d.clear(d.COLOR_BUFFER_BIT),g.currentScreen&&g.currentScreen.update(e)},Object(s.e)(S);case 38:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}},[[27,1,2]]]);
//# sourceMappingURL=main.8337e7d0.chunk.js.map