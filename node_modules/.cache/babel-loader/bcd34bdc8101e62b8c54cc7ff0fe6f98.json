{"ast":null,"code":"var createVitaminARenderSystem=function createVitaminARenderSystem(){var V_WIDTH,V_HEIGHT,vitaminTex;var scale=1;return{init:function init(worldState,_ref){var productTex=_ref.productTex,width=_ref.width,height=_ref.height;vitaminTex=productTex[2].image;V_WIDTH=width/15;V_HEIGHT=V_WIDTH*vitaminTex.height/vitaminTex.width;},update:function update(delta,worldState,_ref2){var batch=_ref2.batch,camera=_ref2.camera,width=_ref2.width,height=_ref2.height;var life=worldState.life;batch.setProjection(camera.combined);batch.begin();for(var i=0;i<worldState.vitaminACounter;i++){vitaminTex.draw(batch,width*0.87,height/8.5+i*(height/60+V_HEIGHT),V_WIDTH,V_HEIGHT,V_WIDTH/2,V_HEIGHT/2,0,scale,scale);}batch.end();if(worldState.vitaminACounter===5){scale=Math.max(scale-=delta*5,0);for(var _i=0;_i<life.length;_i++){if(!life[_i].open){if(scale===0){life[_i].open=true;worldState.lifeIndex=Math.min(worldState.lifeIndex+=1,2);}break;}}if(scale===0){scale=1;worldState.vitaminACounter=0;}}}};};export default createVitaminARenderSystem;","map":{"version":3,"sources":["E:/game-project/eyemiru/src/systems/VitaminARenderSystem.js"],"names":["createVitaminARenderSystem","V_WIDTH","V_HEIGHT","vitaminTex","scale","init","worldState","productTex","width","height","image","update","delta","batch","camera","life","setProjection","combined","begin","i","vitaminACounter","draw","end","Math","max","length","open","lifeIndex","min"],"mappings":"AAAA,GAAMA,CAAAA,0BAA0B,CAAG,QAA7BA,CAAAA,0BAA6B,EAAM,CACvC,GAAIC,CAAAA,OAAJ,CAAaC,QAAb,CAAuBC,UAAvB,CACA,GAAIC,CAAAA,KAAK,CAAG,CAAZ,CACA,MAAO,CACLC,IADK,eACAC,UADA,MAC2C,IAA7BC,CAAAA,UAA6B,MAA7BA,UAA6B,CAAjBC,KAAiB,MAAjBA,KAAiB,CAAVC,MAAU,MAAVA,MAAU,CAC9CN,UAAU,CAAGI,UAAU,CAAC,CAAD,CAAV,CAAcG,KAA3B,CACAT,OAAO,CAAGO,KAAK,CAAG,EAAlB,CACAN,QAAQ,CAAID,OAAO,CAAGE,UAAU,CAACM,MAAtB,CAAgCN,UAAU,CAACK,KAAtD,CACD,CALI,CAMLG,MANK,iBAMEC,KANF,CAMSN,UANT,OAMuD,IAAhCO,CAAAA,KAAgC,OAAhCA,KAAgC,CAAzBC,MAAyB,OAAzBA,MAAyB,CAAjBN,KAAiB,OAAjBA,KAAiB,CAAVC,MAAU,OAAVA,MAAU,IAClDM,CAAAA,IADkD,CACzCT,UADyC,CAClDS,IADkD,CAE1DF,KAAK,CAACG,aAAN,CAAoBF,MAAM,CAACG,QAA3B,EACAJ,KAAK,CAACK,KAAN,GACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGb,UAAU,CAACc,eAA/B,CAAgDD,CAAC,EAAjD,CAAqD,CACnDhB,UAAU,CAACkB,IAAX,CACER,KADF,CAEEL,KAAK,CAAG,IAFV,CAGEC,MAAM,CAAG,GAAT,CAAeU,CAAC,EAAIV,MAAM,CAAG,EAAT,CAAcP,QAAlB,CAHlB,CAIED,OAJF,CAKEC,QALF,CAMED,OAAO,CAAG,CANZ,CAOEC,QAAQ,CAAG,CAPb,CAQE,CARF,CASEE,KATF,CAUEA,KAVF,EAYD,CACDS,KAAK,CAACS,GAAN,GAEA,GAAIhB,UAAU,CAACc,eAAX,GAA+B,CAAnC,CAAsC,CACpChB,KAAK,CAAGmB,IAAI,CAACC,GAAL,CAAUpB,KAAK,EAAIQ,KAAK,CAAG,CAA3B,CAA+B,CAA/B,CAAR,CACA,IAAK,GAAIO,CAAAA,EAAC,CAAG,CAAb,CAAgBA,EAAC,CAAGJ,IAAI,CAACU,MAAzB,CAAiCN,EAAC,EAAlC,CAAsC,CACpC,GAAI,CAACJ,IAAI,CAACI,EAAD,CAAJ,CAAQO,IAAb,CAAmB,CACjB,GAAItB,KAAK,GAAK,CAAd,CAAiB,CACfW,IAAI,CAACI,EAAD,CAAJ,CAAQO,IAAR,CAAe,IAAf,CACApB,UAAU,CAACqB,SAAX,CAAuBJ,IAAI,CAACK,GAAL,CAAUtB,UAAU,CAACqB,SAAX,EAAwB,CAAlC,CAAsC,CAAtC,CAAvB,CACD,CACD,MACD,CACF,CACD,GAAIvB,KAAK,GAAK,CAAd,CAAiB,CACfA,KAAK,CAAG,CAAR,CACAE,UAAU,CAACc,eAAX,CAA6B,CAA7B,CACD,CACF,CACF,CA1CI,CAAP,CA4CD,CA/CD,CAiDA,cAAepB,CAAAA,0BAAf","sourcesContent":["const createVitaminARenderSystem = () => {\r\n  let V_WIDTH, V_HEIGHT, vitaminTex;\r\n  let scale = 1;\r\n  return {\r\n    init(worldState, { productTex, width, height }) {\r\n      vitaminTex = productTex[2].image;\r\n      V_WIDTH = width / 15;\r\n      V_HEIGHT = (V_WIDTH * vitaminTex.height) / vitaminTex.width;\r\n    },\r\n    update(delta, worldState, { batch, camera, width, height }) {\r\n      const { life } = worldState;\r\n      batch.setProjection(camera.combined);\r\n      batch.begin();\r\n      for (let i = 0; i < worldState.vitaminACounter; i++) {\r\n        vitaminTex.draw(\r\n          batch,\r\n          width * 0.87,\r\n          height / 8.5 + i * (height / 60 + V_HEIGHT),\r\n          V_WIDTH,\r\n          V_HEIGHT,\r\n          V_WIDTH / 2,\r\n          V_HEIGHT / 2,\r\n          0,\r\n          scale,\r\n          scale\r\n        );\r\n      }\r\n      batch.end();\r\n\r\n      if (worldState.vitaminACounter === 5) {\r\n        scale = Math.max((scale -= delta * 5), 0);\r\n        for (let i = 0; i < life.length; i++) {\r\n          if (!life[i].open) {\r\n            if (scale === 0) {\r\n              life[i].open = true;\r\n              worldState.lifeIndex = Math.min((worldState.lifeIndex += 1), 2);\r\n            }\r\n            break;\r\n          }\r\n        }\r\n        if (scale === 0) {\r\n          scale = 1;\r\n          worldState.vitaminACounter = 0;\r\n        }\r\n      }\r\n    },\r\n  };\r\n};\r\n\r\nexport default createVitaminARenderSystem;\r\n"]},"metadata":{},"sourceType":"module"}