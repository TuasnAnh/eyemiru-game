{"ast":null,"code":"const createBasketCollideSystem = () => {\n  return {\n    update(delta, worldState, extra) {\n      const {\n        basketState,\n        products,\n        collection,\n        life,\n        starList\n      } = worldState;\n\n      for (let i = products.length - 1; i >= 0; i--) {\n        if (products[i].x > basketState.x - basketState.width / 2 && products[i].x < basketState.x + basketState.width / 2 && products[i].y > basketState.y - basketState.height && products[i].y < basketState.y - basketState.height * 0.8) {\n          if (!products[i].isFake && !worldState.correctCatch) {\n            worldState.correctCatch = true;\n\n            if (collection[worldState.currCollect].type === products[i].type) {\n              worldState.currCollect = Math.min(worldState.currCollect += 1, collection.length - 1);\n              collection[worldState.currCollect].enable = true;\n            }\n\n            starList.push({// value\n            });\n            products.splice(i, 1);\n            break; // if there is any one match => break the loop\n          } //wrong catch\n\n\n          if (products[i].isFake) {\n            life[worldState.lifeIndex].open = false;\n            worldState.lifeIndex = Math.max(0, worldState.lifeIndex -= 1);\n            worldState.stunScreen.check = true;\n            products.splice(i, 1);\n          }\n        }\n      }\n    }\n\n  };\n};\n\nexport default createBasketCollideSystem;","map":{"version":3,"sources":["E:/game-project/eyemiru/src/systems/BasketCollideSystem.js"],"names":["createBasketCollideSystem","update","delta","worldState","extra","basketState","products","collection","life","starList","i","length","x","width","y","height","isFake","correctCatch","currCollect","type","Math","min","enable","push","splice","lifeIndex","open","max","stunScreen","check"],"mappings":"AAAA,MAAMA,yBAAyB,GAAG,MAAM;AACtC,SAAO;AACLC,IAAAA,MAAM,CAACC,KAAD,EAAQC,UAAR,EAAoBC,KAApB,EAA2B;AAC/B,YAAM;AAAEC,QAAAA,WAAF;AAAeC,QAAAA,QAAf;AAAyBC,QAAAA,UAAzB;AAAqCC,QAAAA,IAArC;AAA2CC,QAAAA;AAA3C,UAAwDN,UAA9D;;AAEA,WAAK,IAAIO,CAAC,GAAGJ,QAAQ,CAACK,MAAT,GAAkB,CAA/B,EAAkCD,CAAC,IAAI,CAAvC,EAA0CA,CAAC,EAA3C,EAA+C;AAC7C,YACEJ,QAAQ,CAACI,CAAD,CAAR,CAAYE,CAAZ,GAAgBP,WAAW,CAACO,CAAZ,GAAgBP,WAAW,CAACQ,KAAZ,GAAoB,CAApD,IACAP,QAAQ,CAACI,CAAD,CAAR,CAAYE,CAAZ,GAAgBP,WAAW,CAACO,CAAZ,GAAgBP,WAAW,CAACQ,KAAZ,GAAoB,CADpD,IAEAP,QAAQ,CAACI,CAAD,CAAR,CAAYI,CAAZ,GAAgBT,WAAW,CAACS,CAAZ,GAAgBT,WAAW,CAACU,MAF5C,IAGAT,QAAQ,CAACI,CAAD,CAAR,CAAYI,CAAZ,GAAgBT,WAAW,CAACS,CAAZ,GAAgBT,WAAW,CAACU,MAAZ,GAAqB,GAJvD,EAKE;AACA,cAAI,CAACT,QAAQ,CAACI,CAAD,CAAR,CAAYM,MAAb,IAAuB,CAACb,UAAU,CAACc,YAAvC,EAAqD;AACnDd,YAAAA,UAAU,CAACc,YAAX,GAA0B,IAA1B;;AACA,gBAAIV,UAAU,CAACJ,UAAU,CAACe,WAAZ,CAAV,CAAmCC,IAAnC,KAA4Cb,QAAQ,CAACI,CAAD,CAAR,CAAYS,IAA5D,EAAkE;AAChEhB,cAAAA,UAAU,CAACe,WAAX,GAAyBE,IAAI,CAACC,GAAL,CACtBlB,UAAU,CAACe,WAAX,IAA0B,CADJ,EAEvBX,UAAU,CAACI,MAAX,GAAoB,CAFG,CAAzB;AAIAJ,cAAAA,UAAU,CAACJ,UAAU,CAACe,WAAZ,CAAV,CAAmCI,MAAnC,GAA4C,IAA5C;AACD;;AAEDb,YAAAA,QAAQ,CAACc,IAAT,CAAc,CACZ;AADY,aAAd;AAIAjB,YAAAA,QAAQ,CAACkB,MAAT,CAAgBd,CAAhB,EAAmB,CAAnB;AACA,kBAfmD,CAe5C;AACR,WAjBD,CAmBA;;;AACA,cAAIJ,QAAQ,CAACI,CAAD,CAAR,CAAYM,MAAhB,EAAwB;AACtBR,YAAAA,IAAI,CAACL,UAAU,CAACsB,SAAZ,CAAJ,CAA2BC,IAA3B,GAAkC,KAAlC;AACAvB,YAAAA,UAAU,CAACsB,SAAX,GAAuBL,IAAI,CAACO,GAAL,CAAS,CAAT,EAAaxB,UAAU,CAACsB,SAAX,IAAwB,CAArC,CAAvB;AACAtB,YAAAA,UAAU,CAACyB,UAAX,CAAsBC,KAAtB,GAA8B,IAA9B;AACAvB,YAAAA,QAAQ,CAACkB,MAAT,CAAgBd,CAAhB,EAAmB,CAAnB;AACD;AACF;AACF;AACF;;AAtCI,GAAP;AAwCD,CAzCD;;AA2CA,eAAeV,yBAAf","sourcesContent":["const createBasketCollideSystem = () => {\r\n  return {\r\n    update(delta, worldState, extra) {\r\n      const { basketState, products, collection, life, starList } = worldState;\r\n\r\n      for (let i = products.length - 1; i >= 0; i--) {\r\n        if (\r\n          products[i].x > basketState.x - basketState.width / 2 &&\r\n          products[i].x < basketState.x + basketState.width / 2 &&\r\n          products[i].y > basketState.y - basketState.height &&\r\n          products[i].y < basketState.y - basketState.height * 0.8\r\n        ) {\r\n          if (!products[i].isFake && !worldState.correctCatch) {\r\n            worldState.correctCatch = true;\r\n            if (collection[worldState.currCollect].type === products[i].type) {\r\n              worldState.currCollect = Math.min(\r\n                (worldState.currCollect += 1),\r\n                collection.length - 1\r\n              );\r\n              collection[worldState.currCollect].enable = true;\r\n            }\r\n\r\n            starList.push({\r\n              // value\r\n            });\r\n\r\n            products.splice(i, 1);\r\n            break; // if there is any one match => break the loop\r\n          }\r\n\r\n          //wrong catch\r\n          if (products[i].isFake) {\r\n            life[worldState.lifeIndex].open = false;\r\n            worldState.lifeIndex = Math.max(0, (worldState.lifeIndex -= 1));\r\n            worldState.stunScreen.check = true;\r\n            products.splice(i, 1);\r\n          }\r\n        }\r\n      }\r\n    },\r\n  };\r\n};\r\n\r\nexport default createBasketCollideSystem;\r\n"]},"metadata":{},"sourceType":"module"}