{"ast":null,"code":"var createProductRenderSystem=function createProductRenderSystem(){var P_HEIGHT;var productInfos=[];var fakeProductInfos=[];var product;return{init:function init(worldState,_ref){var width=_ref.width,height=_ref.height,productTex=_ref.productTex,fakeProductTex=_ref.fakeProductTex;P_HEIGHT=height/10;for(var i=0;i<productTex.length;i++){productInfos.push({tex:productTex[i].image,width:productTex[i].image.width*P_HEIGHT/productTex[i].image.height});}for(var _i=0;_i<fakeProductTex.length;_i++){fakeProductInfos.push({tex:fakeProductTex[_i].image,width:fakeProductTex[_i].image.width*P_HEIGHT/fakeProductTex[_i].image.height});}},update:function update(delta,_ref2,_ref3){var products=_ref2.products;var batch=_ref3.batch,camera=_ref3.camera,width=_ref3.width,height=_ref3.height,productTex=_ref3.productTex,fakeProductTex=_ref3.fakeProductTex;batch.setProjection(camera.combined);batch.begin();batch.setColor(1,1,1,1);for(var i=products.length-1;i>=0;i--){product=!products[i].isFake?productInfos[products[i].type]:fakeProductInfos[products[i].type];product.tex.draw(batch,products[i].x-product.width/2,products[i].y-P_HEIGHT,product.width,P_HEIGHT);}batch.end();}};};export default createProductRenderSystem;","map":{"version":3,"sources":["E:/game-project/eyemiru/src/systems/ProductRenderSystem.js"],"names":["createProductRenderSystem","P_HEIGHT","productInfos","fakeProductInfos","product","init","worldState","width","height","productTex","fakeProductTex","i","length","push","tex","image","update","delta","products","batch","camera","setProjection","combined","begin","setColor","isFake","type","draw","x","y","end"],"mappings":"AAAA,GAAMA,CAAAA,yBAAyB,CAAG,QAA5BA,CAAAA,yBAA4B,EAAM,CACtC,GAAIC,CAAAA,QAAJ,CACA,GAAIC,CAAAA,YAAY,CAAG,EAAnB,CACA,GAAIC,CAAAA,gBAAgB,CAAG,EAAvB,CACA,GAAIC,CAAAA,OAAJ,CACA,MAAO,CACLC,IADK,eACAC,UADA,MAC2D,IAA7CC,CAAAA,KAA6C,MAA7CA,KAA6C,CAAtCC,MAAsC,MAAtCA,MAAsC,CAA9BC,UAA8B,MAA9BA,UAA8B,CAAlBC,cAAkB,MAAlBA,cAAkB,CAC9DT,QAAQ,CAAGO,MAAM,CAAG,EAApB,CACA,IAAK,GAAIG,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGF,UAAU,CAACG,MAA/B,CAAuCD,CAAC,EAAxC,CAA4C,CAC1CT,YAAY,CAACW,IAAb,CAAkB,CAChBC,GAAG,CAAEL,UAAU,CAACE,CAAD,CAAV,CAAcI,KADH,CAEhBR,KAAK,CACFE,UAAU,CAACE,CAAD,CAAV,CAAcI,KAAd,CAAoBR,KAApB,CAA4BN,QAA7B,CAAyCQ,UAAU,CAACE,CAAD,CAAV,CAAcI,KAAd,CAAoBP,MAH/C,CAAlB,EAKD,CAED,IAAK,GAAIG,CAAAA,EAAC,CAAG,CAAb,CAAgBA,EAAC,CAAGD,cAAc,CAACE,MAAnC,CAA2CD,EAAC,EAA5C,CAAgD,CAC9CR,gBAAgB,CAACU,IAAjB,CAAsB,CACpBC,GAAG,CAAEJ,cAAc,CAACC,EAAD,CAAd,CAAkBI,KADH,CAEpBR,KAAK,CACFG,cAAc,CAACC,EAAD,CAAd,CAAkBI,KAAlB,CAAwBR,KAAxB,CAAgCN,QAAjC,CACAS,cAAc,CAACC,EAAD,CAAd,CAAkBI,KAAlB,CAAwBP,MAJN,CAAtB,EAMD,CACF,CAnBI,CAoBLQ,MApBK,iBAqBHC,KArBG,aAwBH,IAFEC,CAAAA,QAEF,OAFEA,QAEF,IADEC,CAAAA,KACF,OADEA,KACF,CADSC,MACT,OADSA,MACT,CADiBb,KACjB,OADiBA,KACjB,CADwBC,MACxB,OADwBA,MACxB,CADgCC,UAChC,OADgCA,UAChC,CAD4CC,cAC5C,OAD4CA,cAC5C,CACAS,KAAK,CAACE,aAAN,CAAoBD,MAAM,CAACE,QAA3B,EACAH,KAAK,CAACI,KAAN,GACAJ,KAAK,CAACK,QAAN,CAAe,CAAf,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,EACA,IAAK,GAAIb,CAAAA,CAAC,CAAGO,QAAQ,CAACN,MAAT,CAAkB,CAA/B,CAAkCD,CAAC,EAAI,CAAvC,CAA0CA,CAAC,EAA3C,CAA+C,CAC7CP,OAAO,CAAG,CAACc,QAAQ,CAACP,CAAD,CAAR,CAAYc,MAAb,CACNvB,YAAY,CAACgB,QAAQ,CAACP,CAAD,CAAR,CAAYe,IAAb,CADN,CAENvB,gBAAgB,CAACe,QAAQ,CAACP,CAAD,CAAR,CAAYe,IAAb,CAFpB,CAIAtB,OAAO,CAACU,GAAR,CAAYa,IAAZ,CACER,KADF,CAEED,QAAQ,CAACP,CAAD,CAAR,CAAYiB,CAAZ,CAAgBxB,OAAO,CAACG,KAAR,CAAgB,CAFlC,CAGEW,QAAQ,CAACP,CAAD,CAAR,CAAYkB,CAAZ,CAAgB5B,QAHlB,CAIEG,OAAO,CAACG,KAJV,CAKEN,QALF,EAOD,CACDkB,KAAK,CAACW,GAAN,GACD,CA1CI,CAAP,CA4CD,CAjDD,CAmDA,cAAe9B,CAAAA,yBAAf","sourcesContent":["const createProductRenderSystem = () => {\r\n  let P_HEIGHT;\r\n  let productInfos = [];\r\n  let fakeProductInfos = [];\r\n  let product;\r\n  return {\r\n    init(worldState, { width, height, productTex, fakeProductTex }) {\r\n      P_HEIGHT = height / 10;\r\n      for (let i = 0; i < productTex.length; i++) {\r\n        productInfos.push({\r\n          tex: productTex[i].image,\r\n          width:\r\n            (productTex[i].image.width * P_HEIGHT) / productTex[i].image.height,\r\n        });\r\n      }\r\n\r\n      for (let i = 0; i < fakeProductTex.length; i++) {\r\n        fakeProductInfos.push({\r\n          tex: fakeProductTex[i].image,\r\n          width:\r\n            (fakeProductTex[i].image.width * P_HEIGHT) /\r\n            fakeProductTex[i].image.height,\r\n        });\r\n      }\r\n    },\r\n    update(\r\n      delta,\r\n      { products },\r\n      { batch, camera, width, height, productTex, fakeProductTex }\r\n    ) {\r\n      batch.setProjection(camera.combined);\r\n      batch.begin();\r\n      batch.setColor(1, 1, 1, 1);\r\n      for (let i = products.length - 1; i >= 0; i--) {\r\n        product = !products[i].isFake\r\n          ? productInfos[products[i].type]\r\n          : fakeProductInfos[products[i].type];\r\n\r\n        product.tex.draw(\r\n          batch,\r\n          products[i].x - product.width / 2,\r\n          products[i].y - P_HEIGHT,\r\n          product.width,\r\n          P_HEIGHT\r\n        );\r\n      }\r\n      batch.end();\r\n    },\r\n  };\r\n};\r\n\r\nexport default createProductRenderSystem;\r\n"]},"metadata":{},"sourceType":"module"}