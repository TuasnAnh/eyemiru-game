{"ast":null,"code":"import{createAnimation}from\"gdxjs\";var createWhiteSmokeRenderSystem=function createWhiteSmokeRenderSystem(){var smokeAnimation;var duration=0.05;var frameLength=0;var SMOKE_WIDTH,SMOKE_HEIGHT;return{init:function init(worldState,_ref){var assets=_ref.assets,width=_ref.width,height=_ref.height;var smokeAtlas=assets.smoke;var effect=smokeAtlas.findRegions(\"effect boc khoi\");smokeAnimation=createAnimation(duration,effect);frameLength=effect.length-1;SMOKE_WIDTH=width*0.7;SMOKE_HEIGHT=effect[0].height*SMOKE_WIDTH/effect[0].width;},update:function update(delta,_ref2,_ref3){var whiteSmokeList=_ref2.whiteSmokeList;var batch=_ref3.batch,camera=_ref3.camera,width=_ref3.width,height=_ref3.height;batch.setProjection(camera.combined);batch.begin();batch.setColor(1,1,1,1);for(var i=whiteSmokeList.length-1;i>=0;i--){whiteSmokeList[i].stateTime+=delta;smokeAnimation.getKeyFrame(whiteSmokeList[i].stateTime,1).draw(batch,whiteSmokeList[i].x-SMOKE_WIDTH/2.4,whiteSmokeList[i].y-SMOKE_HEIGHT/1.7,SMOKE_WIDTH,SMOKE_HEIGHT);if(whiteSmokeList[i].stateTime>duration*frameLength){whiteSmokeList.splice(i,1);}}batch.end();}};};export default createWhiteSmokeRenderSystem;","map":{"version":3,"sources":["E:/game-project/eyemiru/src/systems/WhiteSmokeRenderSystem.js"],"names":["createAnimation","createWhiteSmokeRenderSystem","smokeAnimation","duration","frameLength","SMOKE_WIDTH","SMOKE_HEIGHT","init","worldState","assets","width","height","smokeAtlas","smoke","effect","findRegions","length","update","delta","whiteSmokeList","batch","camera","setProjection","combined","begin","setColor","i","stateTime","getKeyFrame","draw","x","y","splice","end"],"mappings":"AAAA,OAASA,eAAT,KAAgC,OAAhC,CAEA,GAAMC,CAAAA,4BAA4B,CAAG,QAA/BA,CAAAA,4BAA+B,EAAM,CACzC,GAAIC,CAAAA,cAAJ,CACA,GAAMC,CAAAA,QAAQ,CAAG,IAAjB,CACA,GAAIC,CAAAA,WAAW,CAAG,CAAlB,CACA,GAAIC,CAAAA,WAAJ,CAAiBC,YAAjB,CACA,MAAO,CACLC,IADK,eACAC,UADA,MACuC,IAAzBC,CAAAA,MAAyB,MAAzBA,MAAyB,CAAjBC,KAAiB,MAAjBA,KAAiB,CAAVC,MAAU,MAAVA,MAAU,CAC1C,GAAMC,CAAAA,UAAU,CAAGH,MAAM,CAACI,KAA1B,CACA,GAAMC,CAAAA,MAAM,CAAGF,UAAU,CAACG,WAAX,CAAuB,iBAAvB,CAAf,CACAb,cAAc,CAAGF,eAAe,CAACG,QAAD,CAAWW,MAAX,CAAhC,CACAV,WAAW,CAAGU,MAAM,CAACE,MAAP,CAAgB,CAA9B,CAEAX,WAAW,CAAGK,KAAK,CAAG,GAAtB,CACAJ,YAAY,CAAIQ,MAAM,CAAC,CAAD,CAAN,CAAUH,MAAV,CAAmBN,WAApB,CAAmCS,MAAM,CAAC,CAAD,CAAN,CAAUJ,KAA5D,CACD,CATI,CAULO,MAVK,iBAUEC,KAVF,aAU+D,IAApDC,CAAAA,cAAoD,OAApDA,cAAoD,IAAhCC,CAAAA,KAAgC,OAAhCA,KAAgC,CAAzBC,MAAyB,OAAzBA,MAAyB,CAAjBX,KAAiB,OAAjBA,KAAiB,CAAVC,MAAU,OAAVA,MAAU,CAClES,KAAK,CAACE,aAAN,CAAoBD,MAAM,CAACE,QAA3B,EACAH,KAAK,CAACI,KAAN,GACAJ,KAAK,CAACK,QAAN,CAAe,CAAf,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,EACA,IAAK,GAAIC,CAAAA,CAAC,CAAGP,cAAc,CAACH,MAAf,CAAwB,CAArC,CAAwCU,CAAC,EAAI,CAA7C,CAAgDA,CAAC,EAAjD,CAAqD,CACnDP,cAAc,CAACO,CAAD,CAAd,CAAkBC,SAAlB,EAA+BT,KAA/B,CACAhB,cAAc,CACX0B,WADH,CACeT,cAAc,CAACO,CAAD,CAAd,CAAkBC,SADjC,CAC4C,CAD5C,EAEGE,IAFH,CAGIT,KAHJ,CAIID,cAAc,CAACO,CAAD,CAAd,CAAkBI,CAAlB,CAAsBzB,WAAW,CAAG,GAJxC,CAKIc,cAAc,CAACO,CAAD,CAAd,CAAkBK,CAAlB,CAAsBzB,YAAY,CAAG,GALzC,CAMID,WANJ,CAOIC,YAPJ,EAUA,GAAIa,cAAc,CAACO,CAAD,CAAd,CAAkBC,SAAlB,CAA8BxB,QAAQ,CAAGC,WAA7C,CAA0D,CACxDe,cAAc,CAACa,MAAf,CAAsBN,CAAtB,CAAyB,CAAzB,EACD,CACF,CACDN,KAAK,CAACa,GAAN,GACD,CA/BI,CAAP,CAiCD,CAtCD,CAwCA,cAAehC,CAAAA,4BAAf","sourcesContent":["import { createAnimation } from \"gdxjs\";\r\n\r\nconst createWhiteSmokeRenderSystem = () => {\r\n  let smokeAnimation;\r\n  const duration = 0.05;\r\n  let frameLength = 0;\r\n  let SMOKE_WIDTH, SMOKE_HEIGHT;\r\n  return {\r\n    init(worldState, { assets, width, height }) {\r\n      const smokeAtlas = assets.smoke;\r\n      const effect = smokeAtlas.findRegions(\"effect boc khoi\");\r\n      smokeAnimation = createAnimation(duration, effect);\r\n      frameLength = effect.length - 1;\r\n\r\n      SMOKE_WIDTH = width * 0.7;\r\n      SMOKE_HEIGHT = (effect[0].height * SMOKE_WIDTH) / effect[0].width;\r\n    },\r\n    update(delta, { whiteSmokeList }, { batch, camera, width, height }) {\r\n      batch.setProjection(camera.combined);\r\n      batch.begin();\r\n      batch.setColor(1, 1, 1, 1);\r\n      for (let i = whiteSmokeList.length - 1; i >= 0; i--) {\r\n        whiteSmokeList[i].stateTime += delta;\r\n        smokeAnimation\r\n          .getKeyFrame(whiteSmokeList[i].stateTime, 1)\r\n          .draw(\r\n            batch,\r\n            whiteSmokeList[i].x - SMOKE_WIDTH / 2.4,\r\n            whiteSmokeList[i].y - SMOKE_HEIGHT / 1.7,\r\n            SMOKE_WIDTH,\r\n            SMOKE_HEIGHT\r\n          );\r\n\r\n        if (whiteSmokeList[i].stateTime > duration * frameLength) {\r\n          whiteSmokeList.splice(i, 1);\r\n        }\r\n      }\r\n      batch.end();\r\n    },\r\n  };\r\n};\r\n\r\nexport default createWhiteSmokeRenderSystem;\r\n"]},"metadata":{},"sourceType":"module"}